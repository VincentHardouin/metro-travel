<!DOCTYPE html><html  lang="fr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Metro Travel</title><style>/*! tailwindcss v4.1.11 | MIT License | https://tailwindcss.com */@layer properties{@supports ((-webkit-hyphens:none) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,::backdrop,:after,:before{--tw-font-weight:initial;--tw-leading:initial}}}.post h1{font-size:var(--text-4xl,2.25rem);line-height:var(--tw-leading,var(--text-4xl--line-height,1.11111));--tw-font-weight:var(--font-weight-bold,700);color:var(--color-gray-900,oklch(21% .034 264.665));font-weight:var(--font-weight-bold,700);padding-bottom:2rem}.post h2{font-size:var(--text-3xl,1.875rem);line-height:var(--tw-leading,var(--text-3xl--line-height,1.2));--tw-font-weight:var(--font-weight-semibold,600);color:var(--color-gray-800,oklch(27.8% .033 256.848));font-weight:var(--font-weight-semibold,600)}.post p{font-size:var(--text-base,1rem);line-height:var(--tw-leading,var(--text-base--line-height,1.5));--tw-leading:var(--leading-relaxed,1.625);color:var(--color-gray-700,oklch(37.3% .034 259.733));line-height:var(--leading-relaxed,1.625)}.post ul{list-style-position:inside;list-style-type:disc}.post a{color:var(--color-blue-600,oklch(54.6% .245 262.881));text-decoration-line:underline}@media (hover:hover){.post a:hover{color:var(--color-blue-800,oklch(42.4% .199 265.638))}}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-leading{syntax:"*";inherits:false}</style><link rel="stylesheet" href="/_nuxt/entry.Bjo9vf1p.css" crossorigin><link rel="preload" as="fetch" crossorigin="anonymous" href="/blog/2024-04-08/_payload.json?c5cbf668-efa3-4a2b-99d9-a73dd68aa420"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/B_RUHvC5.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/p0j60SLX.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/0NVrhxl7.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Dm4Az773.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CiQS8YBX.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BREgCDxA.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CF2n52tH.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/B2zXwtR0.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Pu0jFzgG.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DaOa-OSG.js"><link rel="preload" as="fetch" fetchpriority="low" crossorigin="anonymous" href="/_nuxt/builds/meta/c5cbf668-efa3-4a2b-99d9-a73dd68aa420.json"><script src="https://analytics.vincenthardouin.dev/js/script.js" defer data-domain="metro-travel.vincenthardouin.dev"></script><link rel="prefetch" as="script" crossorigin href="/_nuxt/KXfNCXKJ.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/B36WBLqQ.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/BwvhTdZ3.js"><meta hid="description" name="description" content="D√©fiez vos connaissances du m√©tro parisien chaque jour en trouvant le trajet optimal."><meta name="keywords" content="metro, paris, travel, challenge, game, daily, GTFS"><meta name="author" content="Vincent Hardouin"><meta name="robots" content="index, follow"><meta name="og:title" content="Metro travel"><link rel="icon" type="image/png" href="/favicon.png"><script type="module" src="/_nuxt/B_RUHvC5.js" crossorigin></script><script id="unhead:payload" type="application/json">{"title":"Metro Travel"}</script></head><body><div id="__nuxt"><div><body class="bg-gray-100 dark:bg-gray-900 font-sans transition-colors duration-300"><header class="fixed top-4 left-1/2 transform -translate-x-1/2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-lg px-3 py-3 rounded-full shadow-lg flex justify-between items-center z-10 w-[calc(100%-2rem)] max-w-[640px] mx-auto transition-colors duration-300"><div class="text-lg font-bold text-gray-800 dark:text-gray-200 whitespace-nowrap px-3"> üöá Metro Travel </div><div class="flex items-center gap-6"><ul class="flex gap-4 items-center"><li><a href="/" class="text-base font-medium hover:text-primary no-underline"> Accueil </a></li><li><a href="/blog" class="text-base font-medium hover:text-primary no-underline"> Blog </a></li></ul><a href="/training" class="btn btn-primary btn-sm shadow-none px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap"> S&#39;entra√Æner </a></div></header><!--[--><article class="post max-w-3xl mx-auto pt-34 py-12 px-4 prose prose-gray dark:prose-invert prose prose-lg dark:prose-invert leading-relaxed"><div><h1 id="_2024-04-08"><!--[-->2024-04-08<!--]--></h1><p><!--[-->Plus d&#39;une semaine sans avoir travaill√© sur ce projet, c&#39;est dur de savoir o√π je m&#39;en suis arr√™t√©.<!--]--></p><p><!--[-->J&#39;ai l&#39;impression qu&#39;il me reste plus qu&#39;√† enregistrer les donn√©es dans un fichier.
Une fois fait, je me demande si je ne pourrais pas retirer les paths dans les routes. En r√©alit√©, j&#39;enregistre d√©j√† les
paths dans les stations adjacentes, donc je n&#39;en ai pas besoin.<!--]--></p><p><!--[-->D&#39;ailleurs, l&#39;export se fait en moins de 40 secondes, c&#39;est plut√¥t OK, sachant que j&#39;ai besoin de le faire uniquement
quand il y a de nouvelles stations de m√©tro, ou lignes. Comparons la taille des donn√©es, avant, nous avions 831+365 Ko,
avec le GTFS, j&#39;obtiens un JSON de 931Ko, alors que j&#39;ai des informations en plus.<!--]--></p><p><!--[-->Maintenant, il faut utiliser ces nouvelles donn√©es. Pour √ßa, il faut modifier plusieurs choses :<!--]--></p><ul><!--[--><li><!--[-->Le calcul du plus court chemin<!--]--></li><li><!--[-->L&#39;affichage des stations<!--]--></li><li><!--[-->L&#39;affichage des chemins entre les stations<!--]--></li><!--]--></ul><p><!--[-->Rien d&#39;insurmontable, mais Eat The Frog, je vais commencer par le plus dur, le calcul du plus court chemin.<!--]--></p><p><!--[-->Je vais donc modifier les signatures des fonctions, actuellement la fonction computeShortestPath prend en param√®tre le
nom des stations, je vais plut√¥t lui passer les unique_id. Il manque l&#39;
<code><!--[-->unique_id<!--]--></code> dans les
<code><!--[-->stops<!--]--></code>, je vais ainsi le
rajouter d&#39;abord.<!--]--></p><p><!--[-->Ah voil√†, qui est int√©ressant, les noms entre les stations g√©n√©ralis√©es et les stations du GTFS ne sont pas les m√™mes,
comme :<!--]--></p><ul><!--[--><li><!--[-->GTFS :
<code><!--[-->Michel-Ange - Molitor<!--]--></code> / G√©n√©ralis√©e :
<code><!--[-->Michel-Ange-Molitor<!--]--></code><!--]--></li><li><!--[-->GTFS :
<code><!--[-->Pointe du Lac<!--]--></code> / G√©n√©ralis√©e :
<code><!--[-->Cr√©teil - Pointe du Lac<!--]--></code><!--]--></li><!--]--></ul><p><!--[-->C&#39;est un peu emb√™tant, mais je vais faire avec. Je vais donc faire une regex pour supprimer espaces et tirets, et voir
si c&#39;est inclut.<!--]--></p><p><!--[-->Ce n&#39;est pas suffisant, il y a aussi les accents comme :<!--]--></p><ul><!--[--><li><!--[-->GTFS :
<code><!--[-->Cour Saint-Emilion<!--]--></code> / G√©n√©ralis√©e :
<code><!--[-->Cour Saint-√âmilion<!--]--></code><!--]--></li><!--]--></ul><p><!--[-->Je vais r√©cup√©rer le code du champ de recherche. Il y a aussi le probl√®me d&#39;un nom plus court dans les donn√©es
g√©n√©ralis√©es :<!--]--></p><ul><!--[--><li><!--[-->GTFS :
<code><!--[-->Javel - Andr√© Citro√´n<!--]--></code> / G√©n√©ralis√©e :
<code><!--[-->Javel<!--]--></code><!--]--></li><!--]--></ul><p><!--[-->Puis, j&#39;ai un souci avec les Champs-√âlys√©es, qui ont un tiret diff√©rent :<!--]--></p><ul><!--[--><li><!--[-->GTFS :
<code><!--[-->Champs-√âlys√©es - Clemenceau<!--]--></code> / G√©n√©ralis√©e :
<code><!--[-->Champs-√âlys√©es ‚Äì Clemenceau<!--]--></code><!--]--></li><!--]--></ul><p><!--[-->Et maintenant o√π le probl√®me vient de l&#39;apostrophe :<!--]--></p><ul><!--[--><li><!--[-->GTFS :
<code><!--[-->Cr√©teil - L&#39;√âchat<!--]--></code> / G√©n√©ralis√©e :
<code><!--[-->Cr√©teil‚ÄìL‚Äô√âchat<!--]--></code><!--]--></li><!--]--></ul><p><!--[-->J&#39;ai √† mon avis une derni√®re erreur, la station Barbara ne remonte pas, je vais regarder pourquoi.
Elle a bien le mode
<code><!--[-->METRO<!--]--></code>, mais la colonne
<code><!--[-->metro<!--]--></code> est √†
<code><!--[-->0<!--]--></code> au lieu de
<code><!--[-->1<!--]--></code>. Je pr√©viens IDFM sur leur Slack.<!--]--></p><p><!--[-->J&#39;ai corrig√© le souci en attendant. Revenons, √† la cr√©ation du graph, ce qui est emb√™tant, c&#39;est que je n&#39;ai pas les
unique_id dans les adjacentStations. Le fait de ne pas les avoir m&#39;oblige √† fournir les stations, je ne suis pas
vraiment s√ªr de l&#39;utilit√©, je vais les ajouter directement aux
<code><!--[-->adjacentStations<!--]--></code>.<!--]--></p><p><!--[-->J&#39;ai modifi√© le Dijkstra pour prendre en compte le nouveau format de donn√©es, et r√©ussir √† faire quelque chose avec les
unique_id vs les stop_ids en g√©n√©ral, mais je n&#39;ai pas r√©ussi √† faire ce que je voulais. Je me suis arr√™t√© l√†.<!--]--></p></div></article><!--]--><footer class="fixed bottom-2 left-1/2 transform -translate-x-1/2 text-gray-500 dark:text-gray-400 text-sm bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg px-4 py-1 rounded-full shadow max-w-[90%] w-fit z-10 transition-colors duration-300"> ¬© 2025 <a href="https://github.com/VincentHardouin/metro-travel">Metro Travel</a> ‚Äì par <a href="https://vincenthardouin.dev">Vincent Hardouin</a></footer></body></div></div><div id="teleports"></div><script type="application/json" data-nuxt-data="nuxt-app" data-ssr="true" id="__NUXT_DATA__" data-src="/blog/2024-04-08/_payload.json?c5cbf668-efa3-4a2b-99d9-a73dd68aa420">[{"state":1,"once":3,"_errors":4,"serverRendered":6,"path":7,"prerenderedAt":8},["Reactive",2],{},["Set"],["ShallowReactive",5],{"/blog/2024-04-08":-1},true,"/blog/2024-04-08",1752398828786]</script><script>window.__NUXT__={};window.__NUXT__.config={public:{content:{wsUrl:""},mdc:{components:{prose:true,map:{}},headings:{anchorLinks:{h1:false,h2:true,h3:true,h4:true,h5:false,h6:false}}}},app:{baseURL:"/",buildId:"c5cbf668-efa3-4a2b-99d9-a73dd68aa420",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>