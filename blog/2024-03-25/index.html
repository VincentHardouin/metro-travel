<!DOCTYPE html><html  lang="fr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Metro Travel</title><style>/*! tailwindcss v4.1.11 | MIT License | https://tailwindcss.com */@layer properties{@supports ((-webkit-hyphens:none) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,::backdrop,:after,:before{--tw-font-weight:initial;--tw-leading:initial}}}.post h1{font-size:var(--text-4xl,2.25rem);line-height:var(--tw-leading,var(--text-4xl--line-height,1.11111));--tw-font-weight:var(--font-weight-bold,700);color:var(--color-gray-900,oklch(21% .034 264.665));font-weight:var(--font-weight-bold,700);padding-bottom:2rem}.post h2{font-size:var(--text-3xl,1.875rem);line-height:var(--tw-leading,var(--text-3xl--line-height,1.2));--tw-font-weight:var(--font-weight-semibold,600);color:var(--color-gray-800,oklch(27.8% .033 256.848));font-weight:var(--font-weight-semibold,600)}.post p{font-size:var(--text-base,1rem);line-height:var(--tw-leading,var(--text-base--line-height,1.5));--tw-leading:var(--leading-relaxed,1.625);color:var(--color-gray-700,oklch(37.3% .034 259.733));line-height:var(--leading-relaxed,1.625)}.post ul{list-style-position:inside;list-style-type:disc}.post a{color:var(--color-blue-600,oklch(54.6% .245 262.881));text-decoration-line:underline}@media (hover:hover){.post a:hover{color:var(--color-blue-800,oklch(42.4% .199 265.638))}}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-leading{syntax:"*";inherits:false}</style><style>pre code .line{display:block}</style><link rel="stylesheet" href="/_nuxt/entry.Bjo9vf1p.css" crossorigin><link rel="preload" as="fetch" crossorigin="anonymous" href="/blog/2024-03-25/_payload.json?55023d8b-0a13-42c3-a3db-38e51c1f7711"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/B_RUHvC5.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/p0j60SLX.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/0NVrhxl7.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Dm4Az773.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CiQS8YBX.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BREgCDxA.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CF2n52tH.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Pu0jFzgG.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DaOa-OSG.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/B2zXwtR0.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/rvCjtzJd.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DV7jJGjX.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BTgSNvSv.js"><link rel="preload" as="fetch" fetchpriority="low" crossorigin="anonymous" href="/_nuxt/builds/meta/55023d8b-0a13-42c3-a3db-38e51c1f7711.json"><script src="https://analytics.vincenthardouin.dev/js/script.js" defer data-domain="metro-travel.vincenthardouin.dev"></script><link rel="prefetch" as="script" crossorigin href="/_nuxt/KXfNCXKJ.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/B36WBLqQ.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/BwvhTdZ3.js"><meta hid="description" name="description" content="D√©fiez vos connaissances du m√©tro parisien chaque jour en trouvant le trajet optimal."><meta name="keywords" content="metro, paris, travel, challenge, game, daily, GTFS"><meta name="author" content="Vincent Hardouin"><meta name="robots" content="index, follow"><meta name="og:title" content="Metro travel"><link rel="icon" type="image/png" href="/favicon.png"><script type="module" src="/_nuxt/B_RUHvC5.js" crossorigin></script><script id="unhead:payload" type="application/json">{"title":"Metro Travel"}</script></head><body><div id="__nuxt"><div><body class="bg-gray-100 dark:bg-gray-900 font-sans transition-colors duration-300"><header class="fixed top-4 left-1/2 transform -translate-x-1/2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-lg px-3 py-3 rounded-full shadow-lg flex justify-between items-center z-10 w-[calc(100%-2rem)] max-w-[640px] mx-auto transition-colors duration-300"><div class="text-lg font-bold text-gray-800 dark:text-gray-200 whitespace-nowrap px-3"> üöá Metro Travel </div><div class="flex items-center gap-6"><ul class="flex gap-4 items-center"><li><a href="/" class="text-base font-medium hover:text-primary no-underline"> Accueil </a></li><li><a href="/blog" class="text-base font-medium hover:text-primary no-underline"> Blog </a></li></ul><a href="/training" class="btn btn-primary btn-sm shadow-none px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap"> S&#39;entra√Æner </a></div></header><!--[--><article class="post max-w-3xl mx-auto pt-34 py-12 px-4 prose prose-gray dark:prose-invert prose prose-lg dark:prose-invert leading-relaxed"><div><h1 id="_2024-03-25"><!--[-->2024-03-25<!--]--></h1><p><!--[-->Je m&#39;int√©resse toujours au co√ªt de changement de ligne/correspondance, qui est nomm√©
<code><!--[-->transfer walking<!--]--></code>.
Je trouve un article int√©ressant sur le sujet de la g√©n√©ration des routes :
<a href="https://www.sciencedirect.com/science/article/pii/S2095756416300988" rel="nofollow"><!--[-->Generating route choice sets with operation information on metro networks<!--]--></a><!--]--></p><p><!--[-->Dans cet article, il n&#39;y a pas beaucoup de d√©tail sur comment sont calcul√©s le temps de correspondance,
si ce n&#39;est qu&#39;il est calcul√© en fonction de l&#39;agencement de la station.<!--]--></p><p><!--[-->Je me demande si, en estimant un temps de changement de ligne via les positions GPS, ne serait pas suffisant ?<!--]--></p><p><!--[-->D&#39;ailleurs, je disais que le site d&#39;Open Data d&#39;√éle-de-France Mobilit√©s ne donnait pas beaucoup d&#39;infos, mais en fait,
c&#39;est sur un second
site : <a href="https://prim.iledefrance-mobilites.fr/" rel="nofollow"><!--[-->PRIM - Plateforme R√©gionale d&#39;Information Multimodale<!--]--></a>.<!--]--></p><p><!--[-->Sur celui-ci, il y a bien les lignes, les stations, les correspondances, c&#39;est int√©ressant, √† voir si je veux les
utiliser.
Aussi, je trouve
une <a href="https://prim.iledefrance-mobilites.fr/widgets/idfm-marque_blanche-a" rel="nofollow"><!--[-->API en marque blanche de calcul d&#39;itin√©raire<!--]--></a>.<!--]--></p><p><!--[-->√áa n√©cessite un token PRIM, mais √ßa peut √™tre int√©ressant : je pourrais faire des appels pour chaque changement de
stations
entre les lignes et ainsi avoir tous les chiffres ?
Voyons s&#39;ils ne donnent pas directement la donn√©e dont j&#39;ai besoin.<!--]--></p><p><!--[-->J&#39;ai trouv√© un pdf d&#39;<a href="/blog/assets/IDFM_Documentation_GTFS.pdf" class=""><!--[-->IDFM plut√¥t int√©ressant sur la documentation des GTFS<!--]--></a>.
Je d√©couvre le fichier
<code><!--[-->transferts.txt<!--]--></code> qui donne le temps de correspondance entre arr√™ts.
C&#39;est exactement ce que je cherchais, par contre comme je n&#39;ai pas utilis√© les lignes et stations de IDFM, je n&#39;ai pas
les stops id.<!--]--></p><p><!--[-->Est-ce que je dois migrer sur les donn√©es IDFM ou je dois consolider ma donn√©e avec celle de IDFM ?<!--]--></p><p><!--[-->Regardons les donn√©es de IDFM de plus pr√®s.
Nous avons les arr√™ts dans ce jeu de
donn√©es : <a href="https://prim.iledefrance-mobilites.fr/jeux-de-donnees/arrets-lignes" rel="nofollow"><!--[-->IDFM - Arr√™ts et lignes associ√©es<!--]--></a>
et pour les
lignes : <a href="https://prim.iledefrance-mobilites.fr/jeux-de-donnees/traces-des-lignes-de-transport-en-commun-idfm" rel="nofollow"><!--[-->IDFM - Trac√©s des lignes de transport en commun d&#39;√éle-de-France (source GTFS)<!--]--></a>.<!--]--></p><p><!--[-->En regardant les lignes, par rapport √† mon code actuel, je me rends compte qu&#39;il n&#39;y a pas de direction,
et donc la prise en compte d&#39;une fourche ou non.
Je trouve √ßa compliqu√© pour ce petit projet, et je me dis que je vais rester sur mes donn√©es actuelles.<!--]--></p><p><!--[-->Ce que je vais donc faire :<!--]--></p><ul><!--[--><li><!--[-->Ajouter dans mon script l&#39;id IDFM des stations pour les correspondances<!--]--></li><li><!--[-->Ajouter le temps de correspondance entre les lignes dans une station gr√¢ce au fichier
<code><!--[-->transfers.txt<!--]--></code><!--]--></li><li><!--[-->Ajouter le temps entre deux stations gr√¢ce au fichier
<code><!--[-->stop_times.txt<!--]--></code><!--]--></li><!--]--></ul><p><!--[-->En regardant le fichier
<code><!--[-->stops.txt<!--]--></code>, je me rends compte qu&#39;une m√™me station est pr√©sente plusieurs fois, avec des id
diff√©rents.
Je me rappelle du repository que j&#39;ai lik√© <a href="https://github.com/linkedconnections/gtfs2lc" rel="nofollow"><!--[-->gtfs2lc<!--]--></a>, que j&#39;essaie et j&#39;obtiens
une erreur :<!--]--></p><pre class="language-shell shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span>‚ùØ npx gtfs2lc ./IDFM-gtfs -f json
</span></span><span class="line" line="2"><span>GTFS to linked connections converter use --help to discover more functions
</span></span><span class="line" line="3"><span>Cleaning up and sorting source files
</span></span><span class="line" line="4"><span>Creating index stores...
</span></span><span class="line" line="5"><span>Created and loaded store in ./IDFM-gtfs/stops.db
</span></span><span class="line" line="6"><span>Created and loaded store in ./IDFM-gtfs/routes.db
</span></span><span class="line" line="7"><span>Created and loaded store in ./IDFM-gtfs/services.db
</span></span><span class="line" line="8"><span>Created and loaded store in ./IDFM-gtfs/trips.db
</span></span><span class="line" line="9"><span>Creating Connection rules...
</span></span><span class="line" line="10"><span>/Users/vincenthardouin/.npm/_npx/4c8ae9a5fcd59e62/node_modules/gtfs2lc/lib/stoptimes/st2c.js:45
</span></span><span class="line" line="11"><span>if (arrivalStop[&#39;stop_headsign&#39;] &amp;&amp; arrivalStop[&#39;stop_headsign&#39;] !== &#39;&#39;) {
</span></span></code><!--]--></pre><p><!--[-->Soyons pragmatiques, mes donn√©es viennent d&#39;IDFM et je lance le script normalement, √ßa devrait fonctionner.
Je ne sais pas trop ce que je vais obtenir avec ce script, alors je peux en chercher un autre au lieu d&#39;essayer de voir
ce qui ne va pas dans les donn√©es.<!--]--></p><h2 id="ressources"><a href="#ressources"><!--[-->Ressources<!--]--></a></h2><ul><!--[--><li><!--[--><a href="https://www.sciencedirect.com/science/article/pii/S2095756416300988" rel="nofollow"><!--[-->Generating route choice sets with operation information on metro networks<!--]--></a><!--]--></li><li><!--[--><a href="https://prim.iledefrance-mobilites.fr/" rel="nofollow"><!--[-->PRIM - Plateforme R√©gionale d&#39;Information Multimodale<!--]--></a><!--]--></li><li><!--[--><a href="https://prim.iledefrance-mobilites.fr/widgets/idfm-marque_blanche-a" rel="nofollow"><!--[-->API IDFM en marque blanche de calcul d&#39;itin√©raire<!--]--></a><!--]--></li><li><!--[--><a href="/blog/assets/IDFM_Documentation_GTFS.pdf" class=""><!--[-->Documentation IDFM des GTFS<!--]--></a><!--]--></li><li><!--[--><a href="https://prim.iledefrance-mobilites.fr/jeux-de-donnees/arrets-lignes" rel="nofollow"><!--[-->IDFM - Arr√™ts et lignes associ√©es<!--]--></a><!--]--></li><!--]--></ul><style>html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}</style></div></article><!--]--><footer class="fixed bottom-2 left-1/2 transform -translate-x-1/2 text-gray-500 dark:text-gray-400 text-sm bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg px-4 py-1 rounded-full shadow max-w-[90%] w-fit z-10 transition-colors duration-300"> ¬© 2025 <a href="https://github.com/VincentHardouin/metro-travel">Metro Travel</a> ‚Äì par <a href="https://vincenthardouin.dev">Vincent Hardouin</a></footer></body></div></div><div id="teleports"></div><script type="application/json" data-nuxt-data="nuxt-app" data-ssr="true" id="__NUXT_DATA__" data-src="/blog/2024-03-25/_payload.json?55023d8b-0a13-42c3-a3db-38e51c1f7711">[{"state":1,"once":3,"_errors":4,"serverRendered":6,"path":7,"prerenderedAt":8},["Reactive",2],{},["Set"],["ShallowReactive",5],{"/blog/2024-03-25":-1},true,"/blog/2024-03-25",1752397954410]</script><script>window.__NUXT__={};window.__NUXT__.config={public:{content:{wsUrl:""},mdc:{components:{prose:true,map:{}},headings:{anchorLinks:{h1:false,h2:true,h3:true,h4:true,h5:false,h6:false}}}},app:{baseURL:"/",buildId:"55023d8b-0a13-42c3-a3db-38e51c1f7711",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>