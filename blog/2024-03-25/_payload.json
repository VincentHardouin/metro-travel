[{"data":1,"prerenderedAt":250},["ShallowReactive",2],{"/blog/2024-03-25":3},{"id":4,"title":5,"body":6,"description":242,"extension":243,"meta":244,"navigation":245,"path":246,"seo":247,"stem":248,"__hash__":249},"blog/blog/2024-03-25.md","2024-03-25",{"type":7,"value":8,"toc":239},"minimark",[9,13,29,32,35,44,52,55,67,70,84,87,90,109,122,199,202,207,235],[10,11,5],"h1",{"id":12},"_2024-03-25",[14,15,16,17,21,22],"p",{},"Je m'intéresse toujours au coût de changement de ligne/correspondance, qui est nommé\n",[18,19,20],"code",{},"transfer walking",".\nJe trouve un article intéressant sur le sujet de la génération des routes :\n",[23,24,28],"a",{"href":25,"rel":26},"https://www.sciencedirect.com/science/article/pii/S2095756416300988",[27],"nofollow","Generating route choice sets with operation information on metro networks",[14,30,31],{},"Dans cet article, il n'y a pas beaucoup de détail sur comment sont calculés le temps de correspondance,\nsi ce n'est qu'il est calculé en fonction de l'agencement de la station.",[14,33,34],{},"Je me demande si, en estimant un temps de changement de ligne via les positions GPS, ne serait pas suffisant ?",[14,36,37,38,43],{},"D'ailleurs, je disais que le site d'Open Data d'Île-de-France Mobilités ne donnait pas beaucoup d'infos, mais en fait,\nc'est sur un second\nsite : ",[23,39,42],{"href":40,"rel":41},"https://prim.iledefrance-mobilites.fr/",[27],"PRIM - Plateforme Régionale d'Information Multimodale",".",[14,45,46,47,43],{},"Sur celui-ci, il y a bien les lignes, les stations, les correspondances, c'est intéressant, à voir si je veux les\nutiliser.\nAussi, je trouve\nune ",[23,48,51],{"href":49,"rel":50},"https://prim.iledefrance-mobilites.fr/widgets/idfm-marque_blanche-a",[27],"API en marque blanche de calcul d'itinéraire",[14,53,54],{},"Ça nécessite un token PRIM, mais ça peut être intéressant : je pourrais faire des appels pour chaque changement de\nstations\nentre les lignes et ainsi avoir tous les chiffres ?\nVoyons s'ils ne donnent pas directement la donnée dont j'ai besoin.",[14,56,57,58,62,63,66],{},"J'ai trouvé un pdf d'",[23,59,61],{"href":60},"assets/IDFM_Documentation_GTFS.pdf","IDFM plutôt intéressant sur la documentation des GTFS",".\nJe découvre le fichier\n",[18,64,65],{},"transferts.txt"," qui donne le temps de correspondance entre arrêts.\nC'est exactement ce que je cherchais, par contre comme je n'ai pas utilisé les lignes et stations de IDFM, je n'ai pas\nles stops id.",[14,68,69],{},"Est-ce que je dois migrer sur les données IDFM ou je dois consolider ma donnée avec celle de IDFM ?",[14,71,72,73,78,79,43],{},"Regardons les données de IDFM de plus près.\nNous avons les arrêts dans ce jeu de\ndonnées : ",[23,74,77],{"href":75,"rel":76},"https://prim.iledefrance-mobilites.fr/jeux-de-donnees/arrets-lignes",[27],"IDFM - Arrêts et lignes associées","\net pour les\nlignes : ",[23,80,83],{"href":81,"rel":82},"https://prim.iledefrance-mobilites.fr/jeux-de-donnees/traces-des-lignes-de-transport-en-commun-idfm",[27],"IDFM - Tracés des lignes de transport en commun d'Île-de-France (source GTFS)",[14,85,86],{},"En regardant les lignes, par rapport à mon code actuel, je me rends compte qu'il n'y a pas de direction,\net donc la prise en compte d'une fourche ou non.\nJe trouve ça compliqué pour ce petit projet, et je me dis que je vais rester sur mes données actuelles.",[14,88,89],{},"Ce que je vais donc faire :",[91,92,93,97,103],"ul",{},[94,95,96],"li",{},"Ajouter dans mon script l'id IDFM des stations pour les correspondances",[94,98,99,100],{},"Ajouter le temps de correspondance entre les lignes dans une station grâce au fichier\n",[18,101,102],{},"transfers.txt",[94,104,105,106],{},"Ajouter le temps entre deux stations grâce au fichier\n",[18,107,108],{},"stop_times.txt",[14,110,111,112,115,116,121],{},"En regardant le fichier\n",[18,113,114],{},"stops.txt",", je me rends compte qu'une même station est présente plusieurs fois, avec des id\ndifférents.\nJe me rappelle du repository que j'ai liké ",[23,117,120],{"href":118,"rel":119},"https://github.com/linkedconnections/gtfs2lc",[27],"gtfs2lc",", que j'essaie et j'obtiens\nune erreur :",[123,124,129],"pre",{"className":125,"code":126,"language":127,"meta":128,"style":128},"language-shell shiki shiki-themes github-light github-dark","❯ npx gtfs2lc ./IDFM-gtfs -f json\nGTFS to linked connections converter use --help to discover more functions\nCleaning up and sorting source files\nCreating index stores...\nCreated and loaded store in ./IDFM-gtfs/stops.db\nCreated and loaded store in ./IDFM-gtfs/routes.db\nCreated and loaded store in ./IDFM-gtfs/services.db\nCreated and loaded store in ./IDFM-gtfs/trips.db\nCreating Connection rules...\n/Users/vincenthardouin/.npm/_npx/4c8ae9a5fcd59e62/node_modules/gtfs2lc/lib/stoptimes/st2c.js:45\nif (arrivalStop['stop_headsign'] && arrivalStop['stop_headsign'] !== '') {\n","shell","",[18,130,131,139,145,151,157,163,169,175,181,187,193],{"__ignoreMap":128},[132,133,136],"span",{"class":134,"line":135},"line",1,[132,137,138],{},"❯ npx gtfs2lc ./IDFM-gtfs -f json\n",[132,140,142],{"class":134,"line":141},2,[132,143,144],{},"GTFS to linked connections converter use --help to discover more functions\n",[132,146,148],{"class":134,"line":147},3,[132,149,150],{},"Cleaning up and sorting source files\n",[132,152,154],{"class":134,"line":153},4,[132,155,156],{},"Creating index stores...\n",[132,158,160],{"class":134,"line":159},5,[132,161,162],{},"Created and loaded store in ./IDFM-gtfs/stops.db\n",[132,164,166],{"class":134,"line":165},6,[132,167,168],{},"Created and loaded store in ./IDFM-gtfs/routes.db\n",[132,170,172],{"class":134,"line":171},7,[132,173,174],{},"Created and loaded store in ./IDFM-gtfs/services.db\n",[132,176,178],{"class":134,"line":177},8,[132,179,180],{},"Created and loaded store in ./IDFM-gtfs/trips.db\n",[132,182,184],{"class":134,"line":183},9,[132,185,186],{},"Creating Connection rules...\n",[132,188,190],{"class":134,"line":189},10,[132,191,192],{},"/Users/vincenthardouin/.npm/_npx/4c8ae9a5fcd59e62/node_modules/gtfs2lc/lib/stoptimes/st2c.js:45\n",[132,194,196],{"class":134,"line":195},11,[132,197,198],{},"if (arrivalStop['stop_headsign'] && arrivalStop['stop_headsign'] !== '') {\n",[14,200,201],{},"Soyons pragmatiques, mes données viennent d'IDFM et je lance le script normalement, ça devrait fonctionner.\nJe ne sais pas trop ce que je vais obtenir avec ce script, alors je peux en chercher un autre au lieu d'essayer de voir\nce qui ne va pas dans les données.",[203,204,206],"h2",{"id":205},"ressources","Ressources",[91,208,209,214,219,225,230],{},[94,210,211],{},[23,212,28],{"href":25,"rel":213},[27],[94,215,216],{},[23,217,42],{"href":40,"rel":218},[27],[94,220,221],{},[23,222,224],{"href":49,"rel":223},[27],"API IDFM en marque blanche de calcul d'itinéraire",[94,226,227],{},[23,228,229],{"href":60},"Documentation IDFM des GTFS",[94,231,232],{},[23,233,77],{"href":75,"rel":234},[27],[236,237,238],"style",{},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":128,"searchDepth":141,"depth":141,"links":240},[241],{"id":205,"depth":141,"text":206},"Je m'intéresse toujours au coût de changement de ligne/correspondance, qui est nommé\ntransfer walking.\nJe trouve un article intéressant sur le sujet de la génération des routes :\nGenerating route choice sets with operation information on metro networks","md",{"date":5},true,"/blog/2024-03-25",{"title":5,"description":242},"blog/2024-03-25","-yUwcU_AN04PJSvzxBiKNOXIVN4aX7NB1Roy729TSA4",1752417582969]