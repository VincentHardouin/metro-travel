<!DOCTYPE html><html  lang="fr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Metro Travel</title><style>/*! tailwindcss v4.1.11 | MIT License | https://tailwindcss.com */@layer properties{@supports ((-webkit-hyphens:none) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,::backdrop,:after,:before{--tw-font-weight:initial;--tw-leading:initial}}}.post h1{font-size:var(--text-4xl,2.25rem);line-height:var(--tw-leading,var(--text-4xl--line-height,1.11111));--tw-font-weight:var(--font-weight-bold,700);color:var(--color-gray-900,oklch(21% .034 264.665));font-weight:var(--font-weight-bold,700);padding-bottom:2rem}.post h2{font-size:var(--text-3xl,1.875rem);line-height:var(--tw-leading,var(--text-3xl--line-height,1.2));--tw-font-weight:var(--font-weight-semibold,600);color:var(--color-gray-800,oklch(27.8% .033 256.848));font-weight:var(--font-weight-semibold,600)}.post p{font-size:var(--text-base,1rem);line-height:var(--tw-leading,var(--text-base--line-height,1.5));--tw-leading:var(--leading-relaxed,1.625);color:var(--color-gray-700,oklch(37.3% .034 259.733));line-height:var(--leading-relaxed,1.625)}.post ul{list-style-position:inside;list-style-type:disc}.post a{color:var(--color-blue-600,oklch(54.6% .245 262.881));text-decoration-line:underline}@media (hover:hover){.post a:hover{color:var(--color-blue-800,oklch(42.4% .199 265.638))}}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-leading{syntax:"*";inherits:false}</style><style>pre code .line{display:block}</style><link rel="stylesheet" href="/_nuxt/entry.Bjo9vf1p.css" crossorigin><link rel="preload" as="fetch" crossorigin="anonymous" href="/blog/2024-03-13/_payload.json?4e5261ea-e81c-43ad-9d1f-cdd361277fb0"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/B_RUHvC5.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/p0j60SLX.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/0NVrhxl7.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Dm4Az773.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CiQS8YBX.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BREgCDxA.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CF2n52tH.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BTgSNvSv.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/B2zXwtR0.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Pu0jFzgG.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DaOa-OSG.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DV7jJGjX.js"><link rel="preload" as="fetch" fetchpriority="low" crossorigin="anonymous" href="/_nuxt/builds/meta/4e5261ea-e81c-43ad-9d1f-cdd361277fb0.json"><script src="https://analytics.vincenthardouin.dev/js/script.js" defer data-domain="metro-travel.vincenthardouin.dev"></script><link rel="prefetch" as="script" crossorigin href="/_nuxt/KXfNCXKJ.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/B36WBLqQ.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/BwvhTdZ3.js"><meta hid="description" name="description" content="D√©fiez vos connaissances du m√©tro parisien chaque jour en trouvant le trajet optimal."><meta name="keywords" content="metro, paris, travel, challenge, game, daily, GTFS"><meta name="author" content="Vincent Hardouin"><meta name="robots" content="index, follow"><meta name="og:title" content="Metro travel"><link rel="icon" type="image/png" href="/favicon.png"><script type="module" src="/_nuxt/B_RUHvC5.js" crossorigin></script><script id="unhead:payload" type="application/json">{"title":"Metro Travel"}</script></head><body><div id="__nuxt"><div><body class="bg-gray-100 dark:bg-gray-900 font-sans transition-colors duration-300"><header class="fixed top-4 left-1/2 transform -translate-x-1/2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-lg px-3 py-3 rounded-full shadow-lg flex justify-between items-center z-10 w-[calc(100%-2rem)] max-w-[640px] mx-auto transition-colors duration-300"><div class="text-lg font-bold text-gray-800 dark:text-gray-200 whitespace-nowrap px-3"> üöá Metro Travel </div><div class="flex items-center gap-6"><ul class="flex gap-4 items-center"><li><a href="/" class="text-base font-medium hover:text-primary no-underline"> Accueil </a></li><li><a href="/blog" class="text-base font-medium hover:text-primary no-underline"> Blog </a></li></ul><a href="/training" class="btn btn-primary btn-sm shadow-none px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap"> S&#39;entra√Æner </a></div></header><!--[--><article class="post max-w-3xl mx-auto pt-34 py-12 px-4 prose prose-gray dark:prose-invert prose prose-lg dark:prose-invert leading-relaxed"><div><h1 id="_2024-03-13"><!--[-->2024-03-13<!--]--></h1><p><!--[-->Je n&#39;ai pas fait de note hier, mais il a fallu r√©soudre un bug sur la modale de fin.
Je ne passais plus les bons param√®tres √† la fonction qui v√©rifie si les stations sont reli√©es entre elles.
Plus de tests, √ßa aurait pu √™tre bien ou TS, mais bon ‚Ä¶<!--]--></p><p><!--[-->Aujourd&#39;hui, je vais m&#39;attaquer au fait d&#39;afficher les lignes de m√©tro dans la bonne couleur.
Je tombe sur <a href="https://fr.wikipedia.org/wiki/Mod%C3%A8le:M%C3%A9tro_de_Paris/couleur_fond" rel="nofollow"><!--[-->cette page wikip√©dia<!--]--></a>,
la source est vraiment sympa, j&#39;aime bien ce genre de document.<!--]--></p><p><!--[-->Est-ce que j&#39;ajoute l&#39;info dans json des lignes ? Cela a pour cons√©quence de modifier le script
<code><!--[-->extract-lines<!--]--></code>
pour qu&#39;il ajoute les couleurs.
Sinon j&#39;ajoute l&#39;info dans la class map qui g√®re √ßa. La deuxi√®me solution me para√Æt suffisante.<!--]--></p><p><!--[-->J&#39;ajoute la liste de couleur, je change une ligne de code et √ßa fonctionne, j&#39;aime beaucoup. J&#39;envoie direct en prod.<!--]--></p><p><!--[-->Dans la todo, le prochain sujet, c&#39;est le cout de changement de ligne dans l&#39;algo de Dijkstra. C&#39;est parti !<!--]--></p><p><!--[-->Cr√©ons un jeu de test, j&#39;imagine un par exemple de prendre la 13 qui passe par Saint-Lazare, et remonter jusqu&#39;√†
Brochant.
Si on part de Saint-Lazare, on peut prendre la 13 ou la 14 puis 13.
En prenant la 13 √ßa donne :<!--]--></p><ul><!--[--><li><!--[-->Saint-Lazare<!--]--></li><li><!--[-->Li√®ge<!--]--></li><li><!--[-->Place de Clichy<!--]--></li><li><!--[-->La Fourche<!--]--></li><li><!--[-->Brochant<!--]--></li><!--]--></ul><p><!--[-->En prenant la 14 puis 13 √ßa donne :<!--]--></p><ul><!--[--><li><!--[-->Saint-Lazare<!--]--></li><li><!--[-->Pont Cardinet<!--]--></li><li><!--[-->Porte de Clichy<!--]--></li><li><!--[-->Brochant<!--]--></li><!--]--></ul><p><!--[-->Donc admettons que je vienne de Miromesnil, dans les deux cas je suis dans la 13, puis l&#39;algo actuel me dirait de
prendre la 14, puis re 13.
Ce qui donne :
En prenant la 13 √ßa donne 6 stations :<!--]--></p><ul><!--[--><li><!--[-->13 - Miromesnil<!--]--></li><li><!--[-->13 - Saint-Lazare<!--]--></li><li><!--[-->13 - Li√®ge<!--]--></li><li><!--[-->13 - Place de Clichy<!--]--></li><li><!--[-->13 - La Fourche<!--]--></li><li><!--[-->13 - Brochant<!--]--></li><!--]--></ul><p><!--[-->En prenant la 14 puis 13 √ßa donne 5 stations :<!--]--></p><ul><!--[--><li><!--[-->13 - Miromesnil<!--]--></li><li><!--[-->13-&gt;14 - Saint-Lazare<!--]--></li><li><!--[-->14 - Pont Cardinet<!--]--></li><li><!--[-->14-&gt;13 - Porte de Clichy<!--]--></li><li><!--[-->13 Brochant<!--]--></li><!--]--></ul><p><!--[-->Voil√† mon jeu de test.<!--]--></p><p><!--[-->Ensuite, comment faire, je pense qu&#39;√† la cr√©ation du graph, au lieu de simplement retourner la distance pour la station
adjacente,
je peux aussi ajouter la ligne. Ensuite au moment, o√π l&#39;algo calcule les nodes suivants, si la ligne est diff√©rente,
alors j&#39;ajoute un cout de 1 par exemple.<!--]--></p><p><!--[-->Le code √©crit est mine de rien un peu compliqu√©, je demande √† ChatGPT de le passer en TS, √ßa sera plus simple pour
changer les signatures.
Il m&#39;a tr√®s bien fait √ßa, maintenant, j&#39;ajoute mon intuition.<!--]--></p><p><!--[-->J&#39;h√©site pour l&#39;argument de
<code><!--[-->computeSmallestStationsPath<!--]--></code> entre un cout de changement de ligne (un nombre)
ou juste un bool√©en qui active ou non cette feature.
Comme √ßa, rapidement, je ne vois pas de cas o√π je voudrais un cout diff√©rent de X, donc je vais partir sur un bool√©en.<!--]--></p><p><!--[-->D&#39;ailleurs ce co√ªt est-ce qu&#39;il est bien de 1 ?<!--]--></p><p><!--[-->L&#39;exemple de mon test d&#39;au-dessus est int√©ressant :<!--]--></p><p><!--[-->On est √† &quot;Notre-Dame de Lorette&quot; et on veut aller √† &quot;Brochant&quot;.
Notre-Dame de Lorette est sur la 12, et Brochant est sur la 13.
Le plus naturel serait de faire un changement de ligne de 12-&gt;13 √† Saint-Lazare, mais avec un co√ªt de 0 ou de 1 l&#39;algo
retourne toujours :<!--]--></p><pre class="language-text"><!--[--><code>&quot;Notre-Dame de Lorette&quot;,
&quot;Trinit√© d&#39;Estienne d&#39;Orves&quot;,
&quot;Saint-Lazare&quot;,
&quot;Pont Cardinet&quot;,
&quot;Porte de Clichy&quot;,
&quot;Brochant&quot;,
</code><!--]--></pre><p><!--[-->VS<!--]--></p><pre class="language-text"><!--[--><code>&quot;Notre-Dame de Lorette&quot;,
&quot;Trinit√© d&#39;Estienne d&#39;Orves&quot;,
&quot;Saint-Lazare&quot;,
&quot;Li√®ge&quot;,
&quot;Place de Clichy&quot;,
&quot;La Fourche&quot;,
&quot;Brochant&quot;,
</code><!--]--></pre><p><!--[-->Cout total : 7 vs 7, mais l&#39;algorithme retourne toujours le premier.<!--]--></p><p><!--[-->Si je prends un cout de 2, alors l&#39;algo retourne le deuxi√®me chemin, car j&#39;obtiens : 8 pour 12-&gt;13 vs 9 pour 12-&gt;14-&gt;13.<!--]--></p><p><!--[-->Je vais me renseigner sur comment fonctionne les algos de CityMapper, ou autres.<!--]--></p></div></article><!--]--><footer class="fixed bottom-2 left-1/2 transform -translate-x-1/2 text-gray-500 dark:text-gray-400 text-sm bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg px-4 py-1 rounded-full shadow max-w-[90%] w-fit z-10 transition-colors duration-300"> ¬© 2025 <a href="https://github.com/VincentHardouin/metro-travel">Metro Travel</a> ‚Äì par <a href="https://vincenthardouin.dev">Vincent Hardouin</a></footer></body></div></div><div id="teleports"></div><script type="application/json" data-nuxt-data="nuxt-app" data-ssr="true" id="__NUXT_DATA__" data-src="/blog/2024-03-13/_payload.json?4e5261ea-e81c-43ad-9d1f-cdd361277fb0">[{"state":1,"once":3,"_errors":4,"serverRendered":6,"path":7,"prerenderedAt":8},["Reactive",2],{},["Set"],["ShallowReactive",5],{"/blog/2024-03-13":-1},true,"/blog/2024-03-13",1752398279463]</script><script>window.__NUXT__={};window.__NUXT__.config={public:{content:{wsUrl:""},mdc:{components:{prose:true,map:{}},headings:{anchorLinks:{h1:false,h2:true,h3:true,h4:true,h5:false,h6:false}}}},app:{baseURL:"/",buildId:"4e5261ea-e81c-43ad-9d1f-cdd361277fb0",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>