[{"data":1,"prerenderedAt":140},["ShallowReactive",2],{"/blog/2024-05-08":3},{"id":4,"title":5,"body":6,"description":16,"extension":134,"meta":135,"navigation":81,"path":136,"seo":137,"stem":138,"__hash__":139},"blog/blog/2024-05-08.md","2024-05-08",{"type":7,"value":8,"toc":132},"minimark",[9,13,17,33,44,47,63,66,106,109,117,120,128],[10,11,5],"h1",{"id":12},"_2024-05-08",[14,15,16],"p",{},"Je souhaite publier mes pages de journal directement sur le site. Pour cela, j'aimerais lire les fichiers markdown et\nles rendre en tant que pages. Pour Vue, je sais qu'il existe VuePress mais cela bootstrap un projet complet. Il existe\naussi Nuxt Content, mais il faut être sous Nuxt.js.",[14,18,19,20,27,28,32],{},"Je trouve un transformer Parcel pour importer des\nMarkdown : ",[21,22,26],"a",{"href":23,"rel":24},"https://github.com/indoorequal/parcel-transformer-markdown-front-matter",[25],"nofollow","parcel-transformer-markdown-front-matter",".\nJe vois qu'il est maintenu par François un ancien collègue, c'est donc un bon choix.\nGrâce à ça, je peux importer facilement du Markdown comme suit :\n",[29,30,31],"code",{},"import markdown from './content.md'",".",[14,34,35,36,39,40,43],{},"Cependant, j'aimerais lister tous les billets de journal disponibles, on est dans le navigateur, donc je ne peux pas\nutiliser les outils de Node.js comme\n",[29,37,38],{},"fs",", mais Parcel permet de résoudre des globs\ncomme\n",[29,41,42],{},"import all from './content/*.md'",".\nCela me permet de récupérer tous les fichiers markdown dans le dossier. Il me reste alors à ajouter dans le front matter\nles date des pages et leur titre, pour afficher correctement la liste.",[14,45,46],{},"Du côté du billet de journal en lui-même, j'ai essayé de faire un import dynamique avec un template string, mais cela ne\nfonctionne pas :",[48,49,54],"pre",{"className":50,"code":51,"language":52,"meta":53,"style":53},"language-javascript shiki shiki-themes github-light github-dark","const markdown = await import(`./content/${date}.md`);\n","javascript","",[29,55,56],{"__ignoreMap":53},[57,58,61],"span",{"class":59,"line":60},"line",1,[57,62,51],{},[14,64,65],{},"Je suis donc passé par l'import de glob, et ensuite je récupère le fichier qui m'intéresse :",[48,67,69],{"className":50,"code":68,"language":52,"meta":53,"style":53},"import * as posts from '../../docs/diary/*.md';\n\nconst route = useRoute();\n\nconst date = route.params.date;\nconst markdown = posts[date].default;\n",[29,70,71,76,83,89,94,100],{"__ignoreMap":53},[57,72,73],{"class":59,"line":60},[57,74,75],{},"import * as posts from '../../docs/diary/*.md';\n",[57,77,79],{"class":59,"line":78},2,[57,80,82],{"emptyLinePlaceholder":81},true,"\n",[57,84,86],{"class":59,"line":85},3,[57,87,88],{},"const route = useRoute();\n",[57,90,92],{"class":59,"line":91},4,[57,93,82],{"emptyLinePlaceholder":81},[57,95,97],{"class":59,"line":96},5,[57,98,99],{},"const date = route.params.date;\n",[57,101,103],{"class":59,"line":102},6,[57,104,105],{},"const markdown = posts[date].default;\n",[14,107,108],{},"Maintenant, un souci que j'ai est la gestion des assets comment gérer leurs imports ?",[14,110,111,112],{},"Je fais quelque chose rapidement avec la\nlibrairie ",[21,113,116],{"href":114,"rel":115},"https://github.com/elwin013/parcel-reporter-static-files-copy",[25],"parcel-reporter-static-files-copy",[14,118,119],{},"Que je configure pour simplement copier les assets dans le bon sous-dossier :",[48,121,126],{"className":122,"code":124,"language":125},[123],"language-text","// package.json\n  \"staticFiles\": [\n    {\n      \"staticPath\": \"./docs/diary/assets\",\n      \"staticOutPath\": \"/posts/assets\"\n    }\n  ]\n","text",[29,127,124],{"__ignoreMap":53},[129,130,131],"style",{},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":53,"searchDepth":78,"depth":78,"links":133},[],"md",{"date":5},"/blog/2024-05-08",{"title":5,"description":16},"blog/2024-05-08","UeDZ5OfoFeta7qHC155o2zO_PNSY7QXmztzuEeFtdeM",1752398279460]