<!DOCTYPE html><html  lang="fr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Metro Travel</title><style>/*! tailwindcss v4.1.11 | MIT License | https://tailwindcss.com */@layer properties{@supports ((-webkit-hyphens:none) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,::backdrop,:after,:before{--tw-font-weight:initial;--tw-leading:initial}}}.post h1{font-size:var(--text-4xl,2.25rem);line-height:var(--tw-leading,var(--text-4xl--line-height,1.11111));--tw-font-weight:var(--font-weight-bold,700);color:var(--color-gray-900,oklch(21% .034 264.665));font-weight:var(--font-weight-bold,700);padding-bottom:2rem}.post h2{font-size:var(--text-3xl,1.875rem);line-height:var(--tw-leading,var(--text-3xl--line-height,1.2));--tw-font-weight:var(--font-weight-semibold,600);color:var(--color-gray-800,oklch(27.8% .033 256.848));font-weight:var(--font-weight-semibold,600)}.post p{font-size:var(--text-base,1rem);line-height:var(--tw-leading,var(--text-base--line-height,1.5));--tw-leading:var(--leading-relaxed,1.625);color:var(--color-gray-700,oklch(37.3% .034 259.733));line-height:var(--leading-relaxed,1.625)}.post ul{list-style-position:inside;list-style-type:disc}.post a{color:var(--color-blue-600,oklch(54.6% .245 262.881));text-decoration-line:underline}@media (hover:hover){.post a:hover{color:var(--color-blue-800,oklch(42.4% .199 265.638))}}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-leading{syntax:"*";inherits:false}</style><link rel="stylesheet" href="/_nuxt/entry.D0eQ7gLW.css" crossorigin><link rel="preload" as="fetch" crossorigin="anonymous" href="/blog/2024-04-26/_payload.json?d002b2d4-7063-42d0-8888-5547bfabd298"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/xtOTLKHp.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/B6OLWuwh.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/p1vkQy-1.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CBzfIoK6.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DecUcFKb.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DTXG7hKP.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/B1jbzOwC.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Thq6mFJM.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/D-hlhtvc.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CFUHJ3Jn.js"><link rel="preload" as="fetch" fetchpriority="low" crossorigin="anonymous" href="/_nuxt/builds/meta/d002b2d4-7063-42d0-8888-5547bfabd298.json"><script src="https://analytics.vincenthardouin.dev/js/script.js" defer data-domain="metro-travel.vincenthardouin.dev"></script><link rel="prefetch" as="script" crossorigin href="/_nuxt/Cnsg1qAK.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/DOw0PMhc.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/DAzw92B2.js"><meta hid="description" name="description" content="D√©fiez vos connaissances du m√©tro parisien chaque jour en trouvant le trajet optimal."><meta name="keywords" content="metro, paris, travel, challenge, game, daily, GTFS"><meta name="author" content="Vincent Hardouin"><meta name="robots" content="index, follow"><meta name="og:title" content="Metro travel"><link rel="icon" type="image/png" href="/favicon.png"><script type="module" src="/_nuxt/xtOTLKHp.js" crossorigin></script><script id="unhead:payload" type="application/json">{"title":"Metro Travel"}</script></head><body><div id="__nuxt"><div><body class="bg-gray-100 dark:bg-gray-900 font-sans transition-colors duration-300"><header class="fixed top-4 left-1/2 transform -translate-x-1/2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-lg px-3 py-3 rounded-full shadow-lg flex justify-between items-center z-10 w-[calc(100%-2rem)] max-w-[640px] mx-auto transition-colors duration-300"><div class="text-m md:text-lg font-bold text-gray-800 dark:text-gray-200 whitespace-nowrap px-1 md:px-3"> üöá Metro Travel </div><div class="flex items-center gap-2 md:gap-6"><ul class="hidden sm:flex gap-2 md:gap-4 items-center"><li><a href="/" class="text-sm md:text-base font-medium hover:text-primary no-underline"> Accueil </a></li><li><a href="/blog" class="text-sm md:text-base font-medium hover:text-primary no-underline"> Blog </a></li></ul><a href="/training" class="btn btn-primary btn-sm shadow-none px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap"> S&#39;entra√Æner </a></div></header><!--[--><article class="post max-w-3xl mx-auto pt-34 py-12 px-4 prose prose-gray dark:prose-invert prose prose-lg dark:prose-invert leading-relaxed"><div><h1 id="_2024-04-26"><!--[-->2024-04-26<!--]--></h1><p><!--[-->Longtemps que je n&#39;ai pas pris le temps d&#39;√©crire dans ce journal. R√©capitulons la semaine pass√©e, le 20 avril, j&#39;ai mis
en production l&#39;utilisation des donn√©es provenant de GTFS. Heureux d&#39;√™tre arriv√© au bout de cette migration.<!--]--></p><p><!--[-->Le 23, j&#39;ai migr√© le projet de Javascript natif vers Vue.js, ce qui m&#39;a permis au passage d&#39;ajouter la fonctionnalit√© de
toggle les stations ajout√©es.<!--]--></p><p><!--[-->Enfin, le 25, j&#39;ai ajout√© le mode &quot;Practice&quot;, qui permet de s&#39;entra√Æner √† trouver les stations avec un d√©part et une
arriv√©e diff√©rente √† chaque fois.<!--]--></p><p><!--[-->Aujourd&#39;hui, je vais corriger un bug qui survient quand on d√©sactive une station et qu&#39;on l&#39;ajoute √† nouveau via le
champ de recherche. Ce qui en plus a pour cons√©quence d&#39;inverser la coche de la liste des stations.<!--]--></p><p><!--[-->L√†-dedans, on peut voir deux choses :<!--]--></p><ol><!--[--><li><!--[-->la recherche des stations ne retire plus les stations d√©j√† ajout√©es, c&#39;√©tait
plut√¥t voulu pour d√©l√©guer les stations ajout√©es au composant d&#39;en dessous.<!--]--></li><li><!--[-->la coche de la liste des stations est invers√©e, car les coches ne sont pas li√©es √† l&#39;√©tat des stations.<!--]--></li><!--]--></ol><p><!--[-->Ce qui ne me convient pas, c&#39;est lorsque j&#39;ajoute une station, la m√©thode
<code><!--[-->addStation<!--]--></code> me retourne si le jeu est fini ou
non. Ensuite quand je d√©sactive une station, je la retire de la liste des stations ajout√©es de la partie, alors qu&#39;il ne
faudrait pas, je pense.<!--]--></p><p><!--[-->J&#39;ai une m√©thode toggleStation, qui d√©cide si la station est ajout√©e ou retir√©e, mais je ne l&#39;utilise pas pour ajouter
uniquement pour les checkbox.
Actuellement, la class Game, ne sait pas si une station est simplement d√©sactiv√©e, elle sait juste qu&#39;elle n&#39;est pas
ajout√©e.<!--]--></p><p><!--[-->D&#39;ailleurs, le fait que la class n&#39;ait pas l&#39;information fait que √ßa biaise les r√©sultats du jeu, o√π seulement les
stations ajout√©es et encore actives sont prises en compte. Donc si l&#39;utilisateur fait une erreur, il peut d√©sactiver et
obtenir quand m√™me le plus petit score.<!--]--></p><p><!--[-->Il faut donc que la classe ait connaissance de l&#39;√©tat de la station. Dans un premier temps, je renomme la
Map
<code><!--[-->addedStops<!--]--></code> en
<code><!--[-->currentState<!--]--></code>, qui contient les stations ajout√©es et leur √©tat
<code><!--[-->{ isActive: true }<!--]--></code>.<!--]--></p><p><!--[-->J&#39;ajoute ensuite un getter qui remplace l&#39;ancienne variable
<code><!--[-->addedStops<!--]--></code>.<!--]--></p><p><!--[-->Maintenant, j&#39;essaie d&#39;utiliser un ref qui pointe vers l&#39;instance de Game, mais cela ne fonctionne pas. Apr√®s quelques
essais infructueux, je d√©cide de mettre √† jour √† chaque ajout ou toggle la ref
<code><!--[-->addedStops<!--]--></code>. Je pense que je pourrais
utiliser les events, mais j&#39;ai quelque chose de fonctionnel qui peut partir en production, c&#39;est d√©j√† une premi√®re
√©tape.<!--]--></p></div></article><!--]--><footer class="fixed bottom-5 left-1/2 transform -translate-x-1/2 text-gray-500 dark:text-gray-400 text-sm bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg px-4 py-1 rounded-full shadow max-w-[calc(100%-2rem)] z-10 transition-colors duration-300 flex items-center justify-center gap-1 flex-nowrap whitespace-nowrap"> ¬© 2025 <a href="https://github.com/VincentHardouin/metro-travel" class="hover:underline">Metro Travel</a> ‚Äì par <a href="https://vincenthardouin.dev" class="hover:underline">Vincent Hardouin</a></footer></body></div></div><div id="teleports"></div><script type="application/json" data-nuxt-data="nuxt-app" data-ssr="true" id="__NUXT_DATA__" data-src="/blog/2024-04-26/_payload.json?d002b2d4-7063-42d0-8888-5547bfabd298">[{"state":1,"once":3,"_errors":4,"serverRendered":6,"path":7,"prerenderedAt":8},["Reactive",2],{},["Set"],["ShallowReactive",5],{"/blog/2024-04-26":-1},true,"/blog/2024-04-26",1752417582966]</script><script>window.__NUXT__={};window.__NUXT__.config={public:{content:{wsUrl:""},mdc:{components:{prose:true,map:{}},headings:{anchorLinks:{h1:false,h2:true,h3:true,h4:true,h5:false,h6:false}}}},app:{baseURL:"/",buildId:"d002b2d4-7063-42d0-8888-5547bfabd298",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>